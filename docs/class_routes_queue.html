<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hyperloop Routes: RoutesQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Hyperloop Routes
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_routes_queue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">RoutesQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="queue_8h_source.html">queue.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_routes_queue_1_1_route_item.html">RouteItem</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aa6658be21531a1c191f0d507a0bbf08f"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routes_queue.html#aa6658be21531a1c191f0d507a0bbf08f">queueRoute</a> (const glm::vec2 &amp;start, const glm::vec2 &amp;dest)</td></tr>
<tr class="separator:aa6658be21531a1c191f0d507a0bbf08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a221ea6e4c3d367c5af5a0372abb135c5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routes_queue.html#a221ea6e4c3d367c5af5a0372abb135c5">calculateRoutes</a> ()</td></tr>
<tr class="separator:a221ea6e4c3d367c5af5a0372abb135c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f3ef306a73330317fec093c3bcd9c13"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routes_queue.html#a8f3ef306a73330317fec093c3bcd9c13">isRouteCompleted</a> (size_t id)</td></tr>
<tr class="separator:a8f3ef306a73330317fec093c3bcd9c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e579ab43c560d2e9bb2809e9a5b08f7"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; glm::vec3 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routes_queue.html#a8e579ab43c560d2e9bb2809e9a5b08f7">getCompletedRoute</a> (size_t id)</td></tr>
<tr class="separator:a8e579ab43c560d2e9bb2809e9a5b08f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a9b37a7e3b672bcac6886e057f5953e1e"><td class="memItemLeft" align="right" valign="top">static boost::lockfree::queue&lt; <a class="el" href="struct_routes_queue_1_1_route_item.html">RouteItem</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routes_queue.html#a9b37a7e3b672bcac6886e057f5953e1e">_routes</a></td></tr>
<tr class="separator:a9b37a7e3b672bcac6886e057f5953e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4956405c4fb878eb2d8578d17763a80"><td class="memItemLeft" align="right" valign="top">static std::unordered_map&lt; size_t, std::vector&lt; glm::vec3 &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_routes_queue.html#af4956405c4fb878eb2d8578d17763a80">_completed</a></td></tr>
<tr class="separator:af4956405c4fb878eb2d8578d17763a80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is responsible for handling calculation of routes. It contains a queue of routes to be calculated. Once the route is calculated it is placed into the completed map until it is retrieved. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a221ea6e4c3d367c5af5a0372abb135c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a221ea6e4c3d367c5af5a0372abb135c5">&#9670;&nbsp;</a></span>calculateRoutes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void RoutesQueue::calculateRoutes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A function that will calculate any routes that are in the queue. All routes that are calculated are then moved to the completed map. </p>

</div>
</div>
<a id="a8e579ab43c560d2e9bb2809e9a5b08f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e579ab43c560d2e9bb2809e9a5b08f7">&#9670;&nbsp;</a></span>getCompletedRoute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; glm::vec3 &gt; RoutesQueue::getCompletedRoute </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the control points of a calculated path. This assumes that isRouteCompleted has been called so the completed route exists.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The unique id of the route that was given by queueRoute.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The control points of the calculated route. X and Y of the vectors are longitude and latitude respectively and Z is the elevation. </dd></dl>

</div>
</div>
<a id="a8f3ef306a73330317fec093c3bcd9c13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f3ef306a73330317fec093c3bcd9c13">&#9670;&nbsp;</a></span>isRouteCompleted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool RoutesQueue::isRouteCompleted </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks if the route has been calculated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The unique id of the route that was given by queueRoute.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A boolean that will be true if the route is completed and false if it was not. </dd></dl>

</div>
</div>
<a id="aa6658be21531a1c191f0d507a0bbf08f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6658be21531a1c191f0d507a0bbf08f">&#9670;&nbsp;</a></span>queueRoute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t RoutesQueue::queueRoute </td>
          <td>(</td>
          <td class="paramtype">const glm::vec2 &amp;&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const glm::vec2 &amp;&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Queues a route to be calculated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>The starting position of the route. X and Y are longitude and latitude respectively.</td></tr>
    <tr><td class="paramname">dest</td><td>The ending position of the route. X and Y are longitude and latitude respectively.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A unique identifier that can be used to reference this route and check if it is complete. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af4956405c4fb878eb2d8578d17763a80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4956405c4fb878eb2d8578d17763a80">&#9670;&nbsp;</a></span>_completed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; size_t, std::vector&lt; glm::vec3 &gt; &gt; RoutesQueue::_completed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The map of the completed routes. The key represents the unique identifier that was returned by the queueRoute function. The value is the control points of the bezier curve of the route. Unorded map is used because it fits the thread safety requirements. </p>

</div>
</div>
<a id="a9b37a7e3b672bcac6886e057f5953e1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b37a7e3b672bcac6886e057f5953e1e">&#9670;&nbsp;</a></span>_routes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::lockfree::queue&lt; <a class="el" href="struct_routes_queue_1_1_route_item.html">RoutesQueue::RouteItem</a> &gt; RoutesQueue::_routes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A queue (FIFO) of routes that need to be calculated. We use Boost's lockfree queue so that we can read from the calculation thread and write from the request handler thread. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/routes-server/queue/<a class="el" href="queue_8h_source.html">queue.h</a></li>
<li>src/routes-server/queue/<a class="el" href="queue_8cpp.html">queue.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
